#include <stdio.h>
#include <string.h>

#define MAX_LEN 10000 // 字符串最大长度

int main() {
    int N;
    scanf("%d", &N);
    getchar(); // 吸收换行符，避免干扰后续字符串读取

    for (int i = 0; i < N; i++) {
        char s[MAX_LEN + 1];
        fgets(s, MAX_LEN + 1, stdin); 

        char stack[MAX_LEN]; // 模拟栈，存储左括号
        int top = -1; // 栈顶指针，初始为-1（空栈）
        int is_match = 1; // 标记是否匹配，初始为1（匹配）

        // 遍历字符串每个字符
        for (int j = 0; s[j] != '\0'; j++) {
            if (s[j] == '(' || s[j] == '[') {
                // 左括号入栈
                stack[++top] = s[j];
            } else if (s[j] == ')' || s[j] == ']') {
                // 右括号：先检查栈是否为空
                if (top == -1) {
                    is_match = 0;
                    break;
                }
                // 弹出栈顶，判断是否匹配
                char top_char = stack[top--];
                if ((s[j] == ')' && top_char != '(') || (s[j] == ']' && top_char != '[')) {
                    is_match = 0;
                    break;
                }
            }
        }

        // 遍历结束后，栈必须为空才是完全匹配
        if (is_match && top == -1) {
            printf("Yes\n");
        } else {
            printf("No\n");
        }
    }

    return 0;
}
